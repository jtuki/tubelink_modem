/***************************************************************************************************
* @file name	hal_init.c
* @data   		2015/04/23
* @auther   	chuanpengl
* @module   	mcu init
* @brief 		mcu init
***************************************************************************************************/

/***************************************************************************************************
 * INCLUDES
 */
#include "hal_stm8l151.h"
#include "systick/hal_systick.h"
#include "kernel/timer.h"

/***************************************************************************************************
 * DEBUG SWITCH MACROS
 */

/***************************************************************************************************
 * MACROS
 */


/***************************************************************************************************
 * TYPEDEFS
 */
 
 
/***************************************************************************************************
 * CONSTANTS
 */


/***************************************************************************************************
 * LOCAL FUNCTIONS DECLEAR
 */


/***************************************************************************************************
 * GLOBAL VARIABLES
 */


/***************************************************************************************************
 * STATIC VARIABLES
 */


/***************************************************************************************************
 * EXTERNAL VARIABLES
 */


 
/***************************************************************************************************
 *  GLOBAL FUNCTIONS IMPLEMENTATION
 */
 
/***************************************************************************************************
 * @fn      haddock_hal_init()
 *
 * @brief   hal init for haddock
 *
 * @author	chuanpengl
 *
 * @param   none
 *
 * @return  none
 */
void haddock_hal_init(void)
{
    /* clock init */
    CLK_DeInit();
    CLK_HSICmd(ENABLE);

    CLK_SYSCLKSourceConfig(CLK_SYSCLKSource_HSI);                       
    CLK_SYSCLKDivConfig(CLK_SYSCLKDiv_1);                       /* cpu = pclk = 16 MHz */
    /* clock init end */
    
    __enable_interrupt();
    
    /* system tick init */
    systick_Init(__haddock_increment_time_tick_now);
} /* haddock_hal_init() */



/***************************************************************************************************
 * LOCAL FUNCTIONS IMPLEMENTATION
 */
 

 
/***************************************************************************************************
* HISTORY LIST
* 1. Create File by author @ data
*  	context: here write modified history
*
***************************************************************************************************/